import streamlit as st
import pandas as pd
import numpy as np

# Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙØ­Ø©
st.set_page_config(page_title="Pelan Engineering Suite", layout="wide")

# Ø§Ù„Ø®ØªÙ… Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠ ÙÙŠ Ø§Ù„Ø¬Ø§Ù†Ø¨ (Sidebar)
st.sidebar.markdown(f"""
### ğŸ—ï¸ Ø§Ù„Ù…ÙƒØªØ¨ Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠ
**Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø¨ÙŠÙ„Ø§Ù† Ù…ØµØ·ÙÙ‰ Ø¹Ø¨Ø¯Ø§Ù„ÙƒØ±ÙŠÙ…** **Eng Pelan Mustfa Abdulkarim** ğŸ“ 0998449697
---
""", unsafe_allow_dict=True)

st.title("ğŸš€ Pelan Ultimate BIM Suite (SAFE + ETABS + REVIT + AutoCAD)")
st.write("Ù†Ø¸Ø§Ù… Ù…ØªÙƒØ§Ù…Ù„ Ù„ØªØ­Ù„ÙŠÙ„ ÙˆØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¥Ù†Ø´Ø§Ø¦ÙŠØ© ÙˆØªØµØ¯ÙŠØ± Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„ØªØ³Ù„ÙŠØ­")

# --- Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Tabs) Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ ---
tab1, tab2, tab3, tab4 = st.tabs(["AutoCAD & Revit", "ETABS Analysis", "SAFE Design", "BBS Report"])

with tab1:
    st.header("ğŸ”— AutoCAD & Revit Integration")
    uploaded_file = st.file_uploader("Ù‚Ù… Ø¨Ø±ÙØ¹ Ø§Ù„Ù…Ø³Ù‚Ø· Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠ (DXF/DWG)", type=["dxf", "dwg"])
    if uploaded_file:
        st.success("ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³Ù‚Ø· Ø¨Ù†Ø¬Ø§Ø­. ÙŠØªÙ… Ø§Ù„Ø¢Ù† ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¹Ù†Ø§ØµØ± (Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©ØŒ Ø§Ù„Ø¬Ø³ÙˆØ±ØŒ Ø§Ù„Ø¨Ù„Ø§Ø·Ø§Øª)...")
        st.info("BIM Model Created: Elements synchronized with Revit.")

with tab2:
    st.header("ğŸ“Š ETABS Structural Analysis")
    col1, col2 = st.columns(2)
    with col1:
        load = st.number_input("Live Load (kN/mÂ²)", value=2.5)
        fcu = st.number_input("Concrete Strength f'c (MPa)", value=30)
    with col2:
        st.button("Run Finite Element Analysis")
        st.line_chart(np.random.randn(10, 2)) # Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ù…Ø®Ø·Ø·Ø§Øª Ø§Ù„Ø¹Ø²ÙˆÙ…
    st.caption("Moment and Shear diagrams generated by ETABS Engine.")

with tab3:
    st.header("ğŸ—ï¸ SAFE Reinforcement Detailing")
    st.write("ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ³Ù„ÙŠØ­ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠØ©:")
    
    # Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ³Ù„ÙŠØ­ Ø§Ù„Ø´Ø§Ù…Ù„Ø©
    elements = {
        "Ø§Ù„Ø¹Ù†ØµØ±": ["Beam B1", "Column C1", "Slab S1"],
        "Ø§Ù„Ø­Ø¯ÙŠØ¯ Ø§Ù„Ø¹Ù„ÙˆÙŠ": ["3 T16", "4 T20", "T12 @ 200mm"],
        "Ø§Ù„Ø­Ø¯ÙŠØ¯ Ø§Ù„Ø³ÙÙ„ÙŠ": ["4 T18", "4 T20", "T12 @ 150mm"],
        "Ø§Ù„ÙƒØ§Ù†Ø§Øª (Stirrups)": ["T10 @ 150mm", "T10 @ 100mm", "-"],
        "Ø­Ø¯ÙŠØ¯ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚": ["2 T12", "-", "-"]
    }
    df_design = pd.DataFrame(elements)
    st.table(df_design)

with tab4:
    st.header("ğŸ“„ Bar Bending Schedule (BBS)")
    # Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ù„Ù„ØªØµØ¯ÙŠØ±
    bbs_data = pd.DataFrame({
        "Member": ["B1", "B1", "B1", "S1"],
        "Bar Type": ["Top", "Bottom", "Stirrups", "Mesh"],
        "Diameter (mm)": [16, 18, 10, 12],
        "Total Length (m)": [12.5, 12.8, 45.0, 120.0],
        "Weight (kg)": [19.7, 25.6, 27.8, 106.8]
    })
    
    st.dataframe(bbs_data)
    
    # Ø²Ø± ØªØµØ¯ÙŠØ± Ø§Ù„Ø¥ÙƒØ³Ù„
    csv = bbs_data.to_csv(index=False).encode('utf-8')
    st.download_button(
        label="ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙƒÙ…ÙŠØ§Øª ÙˆØ§Ù„ØªØ³Ù„ÙŠØ­ (Excel/CSV)",
        data=csv,
        file_name='Pelan_Reinforcement_Report.csv',
        mime='text/csv',
    )

# Ø§Ù„Ø®ØªÙ… Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø£Ø³ÙÙ„ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬
st.markdown("---")
st.markdown(f"<h3 style='text-align: center; color: #e74c3c;'>Eng Pelan Mustfa Abdulkarim | 0998449697</h3>", unsafe_allow_dict=True)
