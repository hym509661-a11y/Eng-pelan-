import streamlit as st
import pandas as pd
import math

# ุฅุนุฏุงุฏุงุช ุงูุตูุญุฉ ูุงูุฎุชู
st.set_page_config(page_title="ุจุฑูุงูุฌ ุงูุชุตููู ุงูุฅูุดุงุฆู - ุงูููุฏ ุงูุณูุฑู", layout="wide")

# ุงููููุฉ ูุงูุฎุชู ูู ุงูุดุฑูุท ุงูุฌุงูุจู
st.sidebar.image("https://cdn-icons-png.flaticon.com/512/1087/1087815.png", width=100)
st.sidebar.title("ูุธุงู ุงูุชุตููู ุงููุนุชูุฏ")
st.sidebar.info(f"ุงููุตูู: ูููุฏุณ ูุนุชูุฏ\n\nุฑูู ุงูุงุนุชูุงุฏ: 0998449697")

st.title("๐๏ธ ุงููุตูู ุงูุฅูุดุงุฆู ุงูุฐูู (ุงูููุฏ ุงูุนุฑุจู ุงูุณูุฑู)")
st.write("---")

# ุงุฎุชูุงุฑ ุงูุนูุตุฑ ุงูุฅูุดุงุฆู
element = st.selectbox("ุงุฎุชุฑ ุงูุนูุตุฑ ุงููุฑุงุฏ ุชุตูููู:", ["ุฌุงุฆุฒ ุจูุชูู (Beam)", "ุนููุฏ (Column)", "ุจูุงุทุฉ (Slab)", "ุฃุณุงุณ ูููุฑุฏ (Footing)"])

# ูุฏุฎูุงุช ุนุงูุฉ
col1, col2 = st.columns(2)
with col1:
    fck = st.number_input("ููุงููุฉ ุงูุจูุชูู fck (MPa)", value=25)
    fy = st.number_input("ุฅุฌูุงุฏ ุฎุถูุน ุงูุญุฏูุฏ fy (MPa)", value=400)

# ููุทูุฉ ุงูุญุณุงุจุงุช ุจูุงุกู ุนูู ุงูุนูุตุฑ
if element == "ุฌุงุฆุฒ ุจูุชูู (Beam)":
    with col2:
        b = st.number_input("ุนุฑุถ ุงูุฌุงุฆุฒ b (mm)", value=250)
        h = st.number_input("ุงุฑุชูุงุน ุงูุฌุงุฆุฒ h (mm)", value=500)
        Mu = st.number_input("ุงูุนุฒู ุงูุชุตูููู Mu (kN.m)", value=150.0)
    
    d = h - 50 # ุชุบุทูุฉ ุชูุฑูุจูุฉ
    # ูุนุงุฏูุฉ ุงูููุฏ ุงูุณูุฑู
    Rn = (Mu * 10**6) / (0.9 * b * d**2)
    m = fy / (0.85 * fck)
    rho = (1/m) * (1 - math.sqrt(1 - (2*m*Rn/fy)))
    As = rho * b * d
    
    st.success(f"ูุณุงุญุฉ ุงูุญุฏูุฏ ุงููุทููุจุฉ: {round(As, 2)} mmยฒ")
    
    # ุฑุณู ุชูุถูุญู ุจุณูุท ููุญุฏูุฏ
    st.subheader("๐ ุงูุฑุณู ุงูุชูุถูุญู ููุญุฏูุฏ")
    st.info(f"ุงูุญุฏูุฏ ุงูุณููู ุงูุฑุฆูุณู: {math.ceil(As/201)} T16\n\nุงูุญุฏูุฏ ุงูุนููู (ุชุนููู): 2 T12\n\nุงููุงูุงุช: T8 @ 15cm")

elif element == "ุนููุฏ (Column)":
    with col2:
        Pu = st.number_input("ุงูุญูููุฉ ุงููุญูุฑูุฉ Pu (kN)", value=1000.0)
        Ag = st.number_input("ูุณุงุญุฉ ุงูููุทุน Ag (cmยฒ)", value=900)
    
    # ุญุณุงุจ ุชูุฑูุจู ููุฃุนูุฏุฉ
    As_col = (Pu * 1000 - 0.5 * fck * Ag * 100) / (fy - 0.5 * fck)
    As_min = 0.008 * Ag * 100
    final_As = max(As_col, As_min)
    
    st.success(f"ุฅุฌูุงูู ูุณุงุญุฉ ุงูุชุณููุญ ุงูุทููู: {round(final_As, 2)} mmยฒ")
    st.write(f"ุงูุชูุฒูุน ุงูููุชุฑุญ: {math.ceil(final_As/201)} T16 ููุฒุนุฉ ุจุงูุชุธุงู")

# ุชุฐููู ุงูุตูุญุฉ (ุงูุฎุชู ุงูุซุงุจุช)
st.write("---")
st.markdown(f"""
<div style="text-align: center; border: 2px solid #1E3A8A; padding: 10px; border-radius: 10px;">
    <h4 style="color: #1E3A8A;">ุชู ุงูุชุตููู ููู ููุญูุงุช ุงูููุฏ ุงูุนุฑุจู ุงูุณูุฑู - ูุณุฎุฉ 2026</h4>
    <p><b>ุฑูู ุงูุงุนุชูุงุฏ ุงูุจุฑูุฌู: 0998449697</b></p>
</div>
""", unsafe_allow_html=True)
